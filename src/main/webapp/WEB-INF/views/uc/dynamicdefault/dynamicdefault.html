<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head th:insert="/WEB-INF/fragments/general.html :: head (title='UC Dynamic Default')"/>
<!--/*@thymesVar id="result" type="java.lang.String"*/-->

<body>
<header th:replace="/WEB-INF/fragments/general.html :: header-subpage(title='UC Dynamic Default', href=@{/api/uc/index#uc-example-dynamicdefault})"/>

<section>
    <article>
        <div class="container">
            <div class="row m-2 text-center">
                <div class="col mr-1">
                    <hr class="mt-3 mb-3"/>

                    <a th:replace="/WEB-INF/fragments/general.html :: button(href=@{/api/uc/dynamicdefault}, text='Refresh')"/>
                    <a th:replace="/WEB-INF/fragments/general.html :: button(href=@{/api/uc/dynamicdefault/ServiceA}, text='Select ServiceA')"/>
                    <a th:replace="/WEB-INF/fragments/general.html :: button(href=@{/api/uc/dynamicdefault/ServiceB}, text='Select ServiceB')"/>

                    <hr class="mt-3 mb-3"/>
                </div>
            </div>

            <div class="row m-1">
                <div class="col text-right mr-1">
                    <p>I should be the selected service implementation: </p>
                </div>
                <div class="col text-left ml-1">
                    <span th:text="${result}" class="font-weight-bold"/>
                </div>
            </div>

            <div class="row m-2">
                <div class="col">
                    <hr class="mt-3 mb-3"/>

                    <p>
                        See the package <code>at.gepardec.cditraining.uc.dynamicdefault.*</code> for the relevant
                        classes.
                        Especially take a look at the comments
                    </p>

                    <hr class="mt-3 mb-3"/>
                </div>
            </div>

            <div class="row m-2">
                <div class="col">
                    <p>
                        Normally the default bean with multiple implementations would be one bean without any
                        qualifiers,
                        the others need the qualifiers because <b>there can only be one :)</b>
                    </p>

                    <p>
                        But the problem is that this is defined during compile time, but what if you need the default to
                        be designated during startup or maybe need the default to change during runtime?
                    </p>

                    <p>
                        A valid use case for this would be an application supporting multiple databases with the same
                        schema which are selected depending on the current logged user
                    </p>

                    <hr class="mt-3 mb-3"/>
                </div>
            </div>
            <div class="row m-2">
                <div class="col text-center">
                    <h5>
                        The solution is to manage the default implementation in a custom producer method which is
                        nothing more but a switch
                    </h5>
                </div>
            </div>
        </div>
    </article>
</section>
<div th:replace="/WEB-INF/fragments/general.html :: scripts"/>
</body>
</html>
